include:
  - questions.yml
---
attachment:
    filename: wohngeldantrag
    variable name: wohngeldantrag_pdf
    pdf template file: wohngeldantrag.pdf
    fields:
      - "antragssteller_nachname_geburtsname": ${ comma_list(antragssteller[0].name.last, antragssteller[0].geburtsname)}
      - "antragssteller_vorname": ${ antragssteller[0].name.first }
      - "antragssteller_geschlecht": ${ antragssteller[0].geschlecht }
      - "antragssteller_geburtsdatum": ${ antragssteller[0].geburtsdatum }
      - "antragssteller_geburtsort": ${ antragssteller[0].geburtsort }
      - "antragssteller_familienstand": ${ antragssteller[0].familienstand }
      - "antragssteller_beruf": ${ antragssteller[0].beruf }
      - "antragssteller_staatsangehoerigkeit": ${ antragssteller[0].staatsangehoerigkeit }
      - "antragssteller_bruttoeinkuenfte_steuern_ja" : |
          ${ yesno(antragssteller[0].bruttoeinkuenfte_steuern) }
      - "antragssteller_bruttoeinkuenfte_steuern_nein" : |
          ${ yesno(antragssteller[0].bruttoeinkuenfte_steuern, invert=True) }
      - "antragssteller_kpversicherung_ja": |
          ${ yesno(antragssteller[0].kpversicherung) }
      - "antragssteller_kpversicherung_nein" : |
          ${ yesno(antragssteller[0].kpversicherung, invert=True) }
      - "antragssteller_rlversicherung_ja" : |
          ${ yesno(antragssteller[0].rlversicherung) }
      - "antragssteller_rlversicherung_nein" : |
          ${ yesno(antragssteller[0].rlversicherung, invert=True) }              
          
          
          
      - "person_1_nachname_geburtsname": |
          % if len(antragssteller) > 1:
          ${ comma_list(antragssteller[1].name.last, antragssteller[1].geburtsname)}
          % endif
      - "person_1_vorname": |
          % if len(antragssteller) > 1:
          ${ antragssteller[1].name.first }
          % endif
      - "person_1_geschlecht": |
          % if len(antragssteller) > 1:
          ${ antragssteller[1].geschlecht }
          % endif
      - "person_1_geburtsdatum": |
          % if len(antragssteller) > 1:
          ${ antragssteller[1].geburtsdatum }
          % endif
      - "person_1_geburtsort": |
          % if len(antragssteller) > 1:
          ${ antragssteller[1].geburtsort }
          % endif
      - "person_1_familienstand": |
          % if len(antragssteller) > 1:
          ${ antragssteller[1].familienstand }
          % endif
      - "person_1_verwandschaftsverhaeltnis": |
          % if len(antragssteller) > 1:
          ${ antragssteller[1].verwandschaftsverhaeltnis }
          % endif
      - "person_1_beruf": |
          % if len(antragssteller) > 1:
          ${ antragssteller[1].beruf }
          % endif
      - "person_1_staatsangehoerigkeit": |
          % if len(antragssteller) > 1:
          ${ antragssteller[1].staatsangehoerigkeit }
          % endif

      - "person_1_bruttoeinkuenfte_steuern_ja": |
          % if len(antragssteller) > 1:
          ${ yesno(antragssteller[1].bruttoeinkuenfte_steuern) }
          % endif
      - "person_1_bruttoeinkuenfte_steuern_nein": |
          % if len(antragssteller) > 1:
          ${ yesno(antragssteller[1].bruttoeinkuenfte_steuern, invert=True) }
          % endif
      - "persion_1_kpversicherung_ja": |
          % if len(antragssteller) > 1:
          ${ yesno(antragssteller[1].kpversicherung) }
          % endif
      - "persion_1_kpversicherung_nein": |
          % if len(antragssteller) > 1:
          ${ yesno(antragssteller[1].kpversicherung, invert=True) }
          % endif
      - "person_1_rlversicherung_ja": |
          % if len(antragssteller) > 1:
          ${ yesno(antragssteller[1].rlversicherung) }
          % endif
      - "person_1_rlversicherung_nein": |
          % if len(antragssteller) > 1:
          ${ yesno(antragssteller[1].rlversicherung, invert=True) }
          % endif


      - "person_2_nachname_geburtsname": |
          % if len(antragssteller) > 2:
          ${ comma_list(antragssteller[2].name.last, antragssteller[2].geburtsname)}
          % endif
      - "person_2_vorname": |
          % if len(antragssteller) > 2:
          ${ antragssteller[2].name.first }
          % endif          
      - "person_2_geschlecht": |
          % if len(antragssteller) > 2:
          ${ antragssteller[2].geschlecht }
          % endif
      - "person_2_geburtsdatum": |
          % if len(antragssteller) > 2:
          ${ antragssteller[2].geburtsdatum }
          % endif
      - "person_2_geburtsort": |
          % if len(antragssteller) > 2:
          ${ antragssteller[2].geburtsort }
          % endif
      - "person_2_familienstand": |
          % if len(antragssteller) > 2:
          ${ antragssteller[2].familienstand }
          % endif
      - "person_2_verwandschaftsverhaeltnis": |
          % if len(antragssteller) > 2:
          ${ antragssteller[2].verwandschaftsverhaeltnis }
          % endif
      - "person_2_beruf": |
          % if len(antragssteller) > 2:
          ${ antragssteller[2].beruf }
          % endif
      - "person_2_staatsangehoerigkeit": |
          % if len(antragssteller) > 2:
          ${ antragssteller[2].staatsangehoerigkeit }
          % endif          
          
      - "person_2_bruttoeinkuenfte_steuern_ja": |
          % if len(antragssteller) > 2:
          ${ yesno(antragssteller[2].bruttoeinkuenfte_steuern) }
          % endif
      - "person_2_bruttoeinkuenfte_steuern_nein": |
          % if len(antragssteller) > 2:
          ${ yesno(antragssteller[2].bruttoeinkuenfte_steuern, invert=True) }
          % endif
      - "persion_2_kpversicherung_ja": |
          % if len(antragssteller) > 2:
          ${ yesno(antragssteller[2].kpversicherung) }
          % endif
      - "persion_2_kpversicherung_nein": |
          % if len(antragssteller) > 2:
          ${ yesno(antragssteller[2].kpversicherung, invert=True) }
          % endif
      - "person_2_rlversicherung_ja": |
          % if len(antragssteller) > 2:
          ${ yesno(antragssteller[2].rlversicherung) }
          % endif
      - "person_2_rlversicherung_nein": |
          % if len(antragssteller) > 2:
          ${ yesno(antragssteller[2].rlversicherung, invert=True) }
          % endif       
          
       
---
code: |
  output_file = pdf_concatenate(wohngeldantrag_pdf, unterhaltsverpflichtungen, wohnung_angaben_anlage, untervermietung_und_mitnutzung_anlage, zuschuesse_anlage, filename="Wohngeldantrag_final.pdf")
---
# TO-DO: Hinweis und wo hinschicken
# To-DO: Manche Variablen wurden nicht am Ende definiert?
section: zusammenfassung
question: Hier ist Ihr ausgefüllter Wohngeldantrag!
attachment code: wohngeldantrag_pdf

subquestion: |
  ${ static_image('undraw_Done_re_oak4.svg', width='60%') }
  
  **Hinweis zur fehlerhaften Webansicht mit Google Chrome**:
  
  Wenn Sie den ausgefüllten Wohngeldantrag in der PDF Google Chrome Ansicht zum Dowload öffnen, scheint es als wenn nicht alle Boxen korrekt angekreutzt sind:
  
  ${ static_image('google_chrome_fehlerhafte_ansicht.png', width='100%') }
  
  Nach dem Download, sieht man jedoch das die Boxen in der Tat korrekt angekreutzt wurden:
  
  ${ static_image('pdf_korrekte_ansicht.png', width='100%') }
  <br>
  <br>
  ## Ihre finalen Schritte zum Antrag:
  
  1. Den Wohngeldantrag herunterladen, ausdrucken und auf der letzten Seite unterschreiben.
  2. Ggf. weitere Anhänge herunterladen, ausdrucken und unterschreiben.
  3. Unterlagen mit den passenden Porto und Briefumschlag versandfertig machen und an dein örtliches Wohngeldamt senden: 
  ${ static_image('versandoptionen.png', width='100%') }
event: final_document